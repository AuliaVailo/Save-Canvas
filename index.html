<!DOCTYPE html>
<html lang="en">
  <head>
    <!-- Required meta tags -->
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />

    <!-- Bootstrap CSS -->
    <link
      rel="stylesheet"
      href="https://stackpath.bootstrapcdn.com/bootstrap/5.0.0-alpha1/css/bootstrap.min.css"
      integrity="sha384-r4NyP46KrjDleawBgD5tp8Y7UzmLA05oM1iAEQ17CSuDqnUK2+k9luXQOfXJCJ4I"
      crossorigin="anonymous"
    />

    <!-- FOnt Awsome -->
    <link rel = "stylesheet" href = "http://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.3.0/css/font-awesome.min.css">

    <style>
        img {
            display: block;
            margin-left: auto;
            margin-right: auto;
            width: 100%;
        }
    </style>
    <title>Buku Tamu</title>
  </head>
  <body>
    <div class="container mt-3">
        <h1 class="text-center">Buku Tamu</h1>
        <div class="mb-3">
            <label for="exampleFormControlInput1" class="form-label">Nama</label>
            <input type="text" class="form-control" id="nama" class="nama" placeholder="Nama Lengkap">
        </div>
        <div class="mb-3">
            <label for="exampleFormControlInput1" class="form-label">No. Identitas</label>
            <input type="text" class="form-control" id="identitas" class="identitas" placeholder="Nomor Identitas">
        </div>
        <button type="button" class="btn btn-primary btn-block" id="simpan" class="simpan">Simpan</button>
    </div>
    
    <!-- Modal -->
    <div class="modal fade" id="exampleModal" tabindex="-1" aria-labelledby="exampleModalLabel" aria-hidden="true">
        <div class="modal-dialog modal-fullscreen">
        <div class="modal-content">
            <div class="modal-header">
            <h5 class="modal-title" id="exampleModalLabel">QR Code Anda</h5>
            <!-- <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                <span aria-hidden="true">&times;</span>
            </button> -->
            </div>
            <div class="modal-body">
                <div class="container">
                    <label for="namaQr">Nama</label>
                    <div id="namaQr" style="font-weight: bold;"></div>
                    <label for="identitasQr">Identitas</label>
                    <div id="identitasQr" style="font-weight: bold;"></div>
                    <hr>
                    <h3 class="text-center mb-2">QR CODE</h3>
                    <div id="qrcode" class="text-center mb-2"></div>
                    <div id="forCanvas"></div>
                </div>
            </div>
            <div class="modal-footer">
            <!-- <button type="button" class="btn btn-secondary" data-dismiss="modal">Close</button> -->
            <button type="button" class="btn btn-primary" id="simpanPDF"><i class="fa fa-file-pdf-o" aria-hidden="true"></i></button>
            <button type="button" class="btn btn-primary" id="simpanImage"><i class="fa fa-file-image-o" aria-hidden="true"></i></button>
            <button type="button" class="btn btn-primary" id="simpanEmail"><i class="fa fa-envelope-o" aria-hidden="true"></i></button>
            </div>
        </div>
        </div>
    </div>
    <!-- Optional JavaScript -->
    
    <!-- QRCODE -->
    <script src="./davidshimjs-qrcodejs-04f46c6/qrcode.min.js"></script>

    <!-- html2Canvas -->
    <script src="https://html2canvas.hertzen.com/dist/html2canvas.min.js"></script>

    <!-- JsPDF -->
    <script src="./jsPDF-1.3.2/dist/jspdf.min.js"></script>

    <script src="utils.js"></script>
    <script>
        var button = document.getElementById('simpan');
        var nama = document.getElementById('nama');
        var identitas = document.getElementById('identitas');
        var simpanQr = document.getElementById('simpanQr');

        nama.addEventListener('keypress', function(e) {
            if (e.key === 'Enter') {
                if (nama.value === '') {
                    alert ('Silahkan ini nama terlebih dahulu');
                    nama.focus();
                    return;
                }
                identitas.focus();
            }
        });

        identitas.addEventListener('keypress', function(e) {
            if (e.key === 'Enter') {
                if (identitas.value === '') {
                    alert ('Silahkan ini identitas terlebih dahulu');
                    identitas.focus();
                    return;
                }
                if (nama.value === '') {
                    alert ('Silahkan ini identitas terlebih dahulu');
                    nama.focus();
                    return;
                }
                button.focus();
            }
        });

        button.addEventListener('click', function(e) {
            generateQRCode(nama.value, identitas.value);
        });

        simpanPDF.addEventListener('click', function(e) {
            saveAndClose('pdf');
        });

        simpanImage.addEventListener('click', function(e) {
            saveAndClose('image');
        });

        simpanEmail.addEventListener('click', function(e) {
            saveAndClose('email');
        });

    </script>
    <!-- Popper.js first, then Bootstrap JS -->
    <script
      src="https://cdn.jsdelivr.net/npm/popper.js@1.16.0/dist/umd/popper.min.js"
      integrity="sha384-Q6E9RHvbIyZFJoft+2mJbHaEWldlvI9IOYy5n3zV9zzTtmI3UksdQRVvoxMfooAo"
      crossorigin="anonymous"
    ></script>
    <script
      src="https://stackpath.bootstrapcdn.com/bootstrap/5.0.0-alpha1/js/bootstrap.min.js"
      integrity="sha384-oesi62hOLfzrys4LxRF63OJCXdXDipiYWBnvTl9Y9/TRlw5xlKIEHpNyvvDShgf/"
      crossorigin="anonymous"
    ></script>
  </body>
</html>
